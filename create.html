<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدخال بيانات حيوان - UltraVet Initiative</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Font Awesome (for icons if needed, though not heavily used in forms) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --brand-teal: #005f73;
            --brand-gold: #d4a373;
        }
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f8f9fa;
        }
        .form-section-card {
            background-color: #fff;
            border-radius: .5rem;
            box-shadow: 0 .125rem .25rem rgba(0,0,0,.075);
            margin-bottom: 2rem;
        }
        .form-section-card .card-header {
            background-color: var(--brand-teal);
            color: white;
            font-weight: 500;
            border-bottom: 3px solid var(--brand-gold);
        }
        .form-label {
            font-weight: 500;
            color: #495057;
        }
        .btn-submit {
            background-color: var(--brand-gold);
            border-color: var(--brand-gold);
            color: white;
            font-weight: bold;
        }
        .btn-submit:hover {
            background-color: #bf8a54;
            border-color: #bf8a54;
            color: white;
        }
        /* لتجنب تداخل خط Tajawal مع الأرقام الإنجليزية في حقول التاريخ */
        input[type="date"] {
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
    </style>
</head>
<body>
    <header class="bg-light py-3 mb-4 border-bottom">
        <div class="container text-center">
            <img src="img.jpg" alt="UltraVet Logo" style="max-height: 60px;" class="mb-2"> <!-- استبدل بمسار شعارك -->
            <h1 class="h3" style="color: var(--brand-teal);">نموذج إدخال بيانات الحيوانات</h1>
            <p class="text-muted">مبادرة UltraVet لرعاية الحيوانات</p>
        </div>
    </header>

    <div class="container">
        <form id="animalDataForm">

            <!-- القسم الأول: البيانات الأساسية للحيوان -->
            <div class="card form-section-card">
                <div class="card-header">
                    البيانات الأساسية للحيوان
                </div>
                <div class="card-body p-4">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="serialNumber" class="form-label">الرقم التسلسلي للحيوان:</label>
                            <input type="text" class="form-control" id="serialNumber" placeholder="مثال: UV-K9-00123" required>
                        </div>
                        <div class="col-md-6">
                            <label for="governorateCity" class="form-label">المحافظة/المدينة:</label>
                            <input type="text" class="form-control" id="governorateCity" placeholder="مثال: حماه \ طريق حلب" required>
                        </div>
                        <div class="col-md-12">
                            <label for="relocationPlace" class="form-label">مكان إعادة التوطين (أو العثور):</label>
                            <input type="text" class="form-control" id="relocationPlace" placeholder="مثال: شارع 9، الحاضر أو ملجأ X" required>
                        </div>
                        <div class="col-md-6">
                            <label for="animalType" class="form-label">نوع الحيوان:</label>
                            <select class="form-select" id="animalType" required>
                                <option selected disabled value="">اختر...</option>
                                <option value="dog_baladi">كلب / بلدي</option>
                                <option value="dog_breed">كلب / سلالة أخرى</option>
                                <option value="cat_baladi">قط / بلدي</option>
                                <option value="cat_breed">قط / سلالة أخرى</option>
                                <option value="other">أخرى (يُحدد)</option>
                            </select>
                        </div>
                        <div class="col-md-6" id="otherAnimalTypeContainer" style="display: none;">
                            <label for="otherAnimalTypeName" class="form-label">تحديد نوع الحيوان الآخر:</label>
                            <input type="text" class="form-control" id="otherAnimalTypeName" placeholder="مثال: أرنب، حصان">
                        </div>
                         <div class="col-md-6">
                            <label for="breedName" class="form-label">اسم السلالة (إن وجدت):</label>
                            <input type="text" class="form-control" id="breedName" placeholder="مثال: شيرازي، جولدن ريتريفر">
                        </div>
                        <div class="col-md-6">
                            <label for="gender" class="form-label">الجنس:</label>
                            <select class="form-select" id="gender" required>
                                <option selected disabled value="">اختر...</option>
                                <option value="male">ذكر</option>
                                <option value="female">أنثى</option>
                                <option value="unknown">غير معروف</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="estimatedAge" class="form-label">العمر التقديري:</label>
                            <input type="text" class="form-control" id="estimatedAge" placeholder="مثال: سنتان، 6 أشهر" required>
                        </div>
                        <div class="col-md-6">
                            <label for="color" class="form-label">اللون:</label>
                            <input type="text" class="form-control" id="color" placeholder="مثال: أبيض، أسود مرقط" required>
                        </div>
                         <div class="col-md-12">
                            <label for="distinguishingMarks" class="form-label">العلامات المميزة (إن وجدت):</label>
                            <textarea class="form-control" id="distinguishingMarks" rows="2" placeholder="وصف أي علامات فارقة أو مميزة"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- القسم الثاني: الإجراءات الطبية والوقائية -->
            <div class="card form-section-card">
                <div class="card-header">
                    الإجراءات الطبية والوقائية
                </div>
                <div class="card-body p-4">
                    <div class="mb-3">
                        <label for="surgeryDetails" class="form-label">العملية الجراحية (إن وجدت):</label>
                        <textarea class="form-control" id="surgeryDetails" rows="3" placeholder="تفصيل العملية، التاريخ، والملاحظات (مثال: تعقيم، تاريخ: 10/10/2023، تمت بنجاح)"></textarea>
                    </div>
                    <hr>
                    <h6 class="mb-3" style="color: var(--brand-teal);">علاج الطفيليات:</h6>
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label for="internalParasiteTreatment" class="form-label">الطفيليات الداخلية (اسم العلاج):</label>
                            <input type="text" class="form-control" id="internalParasiteTreatment" placeholder="إدخال يدوي لاسم الدواء">
                        </div>
                        <div class="col-md-4">
                            <label for="internalParasiteDate" class="form-label">تاريخ العلاج الداخلي:</label>
                            <input type="date" class="form-control" id="internalParasiteDate">
                        </div>
                        <div class="col-md-4">
                            <label for="internalParasiteDose" class="form-label">الجرعة (الداخلية):</label>
                            <input type="text" class="form-control" id="internalParasiteDose" placeholder="مثال: قرص واحد، 2 مل">
                        </div>
                    </div>
                    <div class="row g-3 mt-2">
                         <div class="col-md-4">
                            <label for="externalParasiteTreatment" class="form-label">الطفيليات الخارجية (اسم العلاج):</label>
                            <input type="text" class="form-control" id="externalParasiteTreatment" placeholder="إدخال يدوي لاسم الدواء">
                        </div>
                        <div class="col-md-4">
                            <label for="externalParasiteDate" class="form-label">تاريخ العلاج الخارجي:</label>
                            <input type="date" class="form-control" id="externalParasiteDate">
                        </div>
                        <div class="col-md-4">
                            <label for="externalParasiteDose" class="form-label">الجرعة (الخارجية):</label>
                            <input type="text" class="form-control" id="externalParasiteDose" placeholder="مثال: أمبول واحد، رشة">
                        </div>
                    </div>
                    <hr>
                     <div class="mb-3">
                        <label for="otherTreatments" class="form-label">علاجات أخرى:</label>
                        <textarea class="form-control" id="otherTreatments" rows="3" placeholder="تفصيل أي علاجات إضافية تم تقديمها (مثال: علاج جرب، مضاد حيوي لالتهاب، فيتامينات)"></textarea>
                    </div>
                    <hr>
                    <h6 class="mb-3" style="color: var(--brand-teal);">اللقاحات:</h6>
                     <div id="vaccineEntries">
                        <!-- نموذج إدخال اللقاح (يمكن تكراره) -->
                        <div class="vaccine-entry border p-3 mb-3 rounded">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label class="form-label">نوع اللقاح:</label>
                                    <select class="form-select vaccine-type">
                                        <option selected disabled value="">اختر...</option>
                                        <option value="rabies">السعار</option>
                                        <option value="heptavalent">سباعي</option>
                                        <option value="other">لقاح آخر (يُحدد)</option>
                                    </select>
                                </div>
                                <div class="col-md-3 other-vaccine-name-container" style="display: none;">
                                     <label class="form-label">اسم اللقاح الآخر:</label>
                                     <input type="text" class="form-control other-vaccine-name" placeholder="اسم اللقاح">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">الشركة المصنعة:</label>
                                    <input type="text" class="form-control vaccine-manufacturer" placeholder="مثال: Nobivac, Zoetis">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">تاريخ الإعطاء:</label>
                                    <input type="date" class="form-control vaccine-date-given">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">تاريخ الجرعة القادمة (إن وجدت):</label>
                                    <input type="date" class="form-control vaccine-date-next">
                                </div>
                            </div>
                        </div>
                     </div>
                     <button type="button" class="btn btn-outline-secondary btn-sm mt-2" id="addVaccineEntry"><i class="fas fa-plus me-1"></i> إضافة لقاح آخر</button>
                </div>
            </div>

            <!-- القسم الثالث: الجهة الطبية المشرفة -->
            <div class="card form-section-card">
                <div class="card-header">
                    الجهة الطبية المشرفة
                </div>
                <div class="card-body p-4">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="vetName" class="form-label">اسم الطبيب البيطري أو المؤسسة:</label>
                            <input type="text" class="form-control" id="vetName" placeholder="مثال: د. أحمد محمود / عيادة الأمل البيطرية" required>
                        </div>
                        <div class="col-md-6">
                            <label for="supervisingSociety" class="form-label">اسم الجمعية المشرفة (إن وجدت):</label>
                            <input type="text" class="form-control" id="supervisingSociety" placeholder="مثال: جمعية حماية الحيوان بالقاهرة">
                        </div>
                    </div>
                </div>
            </div>

            <!-- القسم الرابع: معلومات التواصل في حالات الطوارئ -->
            <div class="card form-section-card">
                <div class="card-header">
                    معلومات التواصل في حالات الطوارئ
                </div>
                <div class="card-body p-4">
                     <div class="col-md-12">
                        <label for="emergencyContact" class="form-label">رقم الهاتف / واتساب للطوارئ:</label>
                        <input type="tel" class="form-control" id="emergencyContact" placeholder="مثال: 01xxxxxxxxx" required>
                    </div>
                </div>
            </div>

            <!-- زر الإرسال -->
            <div class="text-center mt-4 mb-5">
                <button type="submit" class="btn btn-submit btn-lg px-5">
                    <i class="fas fa-save me-2"></i> حفظ البيانات
                </button>
            </div>

        </form>
    </div>

    <footer class="bg-light py-3 mt-5 border-top">
        <div class="container text-center">
            <p class="mb-0 text-muted">© <span id="currentYear"></span> UltraVet Initiative</p>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // إظهار حقل "تحديد نوع الحيوان الآخر" عند اختيار "أخرى"
        const animalTypeSelect = document.getElementById('animalType');
        const otherAnimalTypeContainer = document.getElementById('otherAnimalTypeContainer');
        animalTypeSelect.addEventListener('change', function() {
            if (this.value === 'other') {
                otherAnimalTypeContainer.style.display = 'block';
                otherAnimalTypeContainer.querySelector('input').required = true;
            } else {
                otherAnimalTypeContainer.style.display = 'none';
                otherAnimalTypeContainer.querySelector('input').required = false;
                otherAnimalTypeContainer.querySelector('input').value = ''; // مسح القيمة عند الإخفاء
            }
        });

        // التعامل مع حقل "اسم اللقاح الآخر"
        function handleOtherVaccineName(vaccineEntry) {
            const vaccineTypeSelect = vaccineEntry.querySelector('.vaccine-type');
            const otherVaccineNameContainer = vaccineEntry.querySelector('.other-vaccine-name-container');
            const otherVaccineNameInput = vaccineEntry.querySelector('.other-vaccine-name');

            if (vaccineTypeSelect.value === 'other') {
                otherVaccineNameContainer.style.display = 'block';
                otherVaccineNameInput.required = true;
            } else {
                otherVaccineNameContainer.style.display = 'none';
                otherVaccineNameInput.required = false;
                otherVaccineNameInput.value = '';
            }
        }

        // تطبيق الدالة على أول مدخل للقاح
        document.querySelectorAll('.vaccine-entry').forEach(entry => {
            handleOtherVaccineName(entry); // للتحقق عند التحميل الأولي إذا كان هناك قيمة محفوظة
            entry.querySelector('.vaccine-type').addEventListener('change', function() {
                handleOtherVaccineName(entry);
            });
        });


        // إضافة مدخل لقاح جديد
        const addVaccineButton = document.getElementById('addVaccineEntry');
        const vaccineEntriesContainer = document.getElementById('vaccineEntries');
        const firstVaccineEntry = vaccineEntriesContainer.querySelector('.vaccine-entry').cloneNode(true);

        // مسح القيم من النموذج المنسوخ
        firstVaccineEntry.querySelectorAll('input, select').forEach(el => {
            if (el.type === 'select-one') el.selectedIndex = 0;
            else el.value = '';
        });
        // إخفاء حقل اسم اللقاح الآخر في النموذج المنسوخ افتراضياً
        firstVaccineEntry.querySelector('.other-vaccine-name-container').style.display = 'none';
        firstVaccineEntry.querySelector('.other-vaccine-name').required = false;


        addVaccineButton.addEventListener('click', function() {
            const newVaccineEntry = firstVaccineEntry.cloneNode(true); // ننسخ النسخة النظيفة
             // مسح القيم مرة أخرى لضمان عدم وجود قيم متبقية من نسخ سابقة (احتياطي)
            newVaccineEntry.querySelectorAll('input, select').forEach(el => {
                 if (el.type === 'select-one') el.selectedIndex = 0;
                 else el.value = '';
            });
            newVaccineEntry.querySelector('.other-vaccine-name-container').style.display = 'none';
            newVaccineEntry.querySelector('.other-vaccine-name').required = false;

            // إعادة ربط مستمع الحدث لحقل نوع اللقاح في المدخل الجديد
            newVaccineEntry.querySelector('.vaccine-type').addEventListener('change', function() {
                handleOtherVaccineName(newVaccineEntry);
            });

            vaccineEntriesContainer.appendChild(newVaccineEntry);
        });

        // يمكنك إضافة JavaScript هنا للتحقق من صحة النموذج قبل الإرسال (form validation)
        // أو لإرسال البيانات باستخدام AJAX إذا كنت لا تريد تحديث الصفحة بالكامل
        const form = document.getElementById('animalDataForm');
        form.addEventListener('submit', function(event) {
            event.preventDefault(); // منع الإرسال الافتراضي
            // هنا يمكنك جمع بيانات النموذج وإرسالها
            // مثال بسيط لجمع البيانات وعرضها في الكونسول:
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => {
                // التعامل مع الحقول المكررة (مثل اللقاحات)
                if (data[key]) {
                    if (!Array.isArray(data[key])) {
                        data[key] = [data[key]];
                    }
                    data[key].push(value);
                } else {
                    data[key] = value;
                }
            });
            console.log('بيانات النموذج:', data);
            alert('تم إرسال البيانات (انظر الكونسول). في التطبيق الفعلي سيتم إرسالها للخادم.');
            // form.reset(); // لإعادة تعيين النموذج بعد الإرسال
        });
    </script>
</body>
</html>